<?php

function jwt_permission() {
    return array(
        'administer_jwt' => array(
            'title' => t('Administer JASON Web Tokens.')
        ),
    );
}

/**
 * Implements hook_menu()
 */
function jwt_menu() {
    $items = array();
    $items['admin/config/administration/jwt'] = array(
        'title' => 'Administer JWT Tokens',
        'description' => 'Page to set up and administer site-wide JWT tokens',
        'page callback' => 'backdrop_get_form',
        'page arguments' => array('jwt_configuration_form'),
        'access arguments' =>  array('administer_jwt'),
    );
    return $items;
}

/**
 * Implements hook_form
 * JWT Admin Page
 */
function jwt_configuration_form($form, &$form_state) {
    $form['#attached']['js'][] = array(
        'type' => 'file',
        'data' => backdrop_get_path('module', 'jwt') . '/admin-scripts.js',
    );

    $form['jwt_secret'] = array(
        '#type' => 'textfield',
        '#size' => '32',
        '#title' => 'Secret Key',
    );

    $form['generate_secret'] = array(
        '#type' => 'button',
        '#value' => 'Generate Secret Key',
        '#attributes' => array('onclick' => 'testAlert();return false'),
    );

    $form['submit'] = array(
        '#type' => 'submit',
        '#title' => 'Save',
    );
    return $form;
}

/** JWT Form Submit Handler
 * 
 */
function jwt_configuration_form_submit($form, &$form_state) {
    
}
